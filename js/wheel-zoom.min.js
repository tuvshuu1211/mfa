/*!
 * Start Bootstrap - Agency v5.2.2 (https://startbootstrap.com/template-overviews/agency)
 * Copyright 2013-2020 Start Bootstrap
 * Licensed under MIT (https://github.com/BlackrockDigital/startbootstrap-agency/blob/master/LICENSE)
 */

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).WZoom=e()}(this,function(){"use strict";function n(t){var e=t.getBoundingClientRect(),n=document,i=n.body,o=n.documentElement,s=window.pageYOffset||o.scrollTop||i.scrollTop,r=window.pageXOffset||o.scrollLeft||i.scrollLeft,h=o.clientTop||i.clientTop||0,c=o.clientLeft||i.clientLeft||0;return{top:e.top+s-h,left:e.left+r-c}}function i(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function o(t,e,n,i){var o=3<arguments.length&&void 0!==i&&i;t.addEventListener(e,n,o)}function e(t,e,n,i){var o=3<arguments.length&&void 0!==i&&i;t.removeEventListener(e,n,o)}function s(){return"ontouchstart"in window||0<navigator.MaxTouchPoints||0<navigator.msMaxTouchPoints}function a(t){return"wheel"===t.type||"mousedown"===t.type||"mousemove"===t.type||"mouseup"===t.type?t.clientX:t.changedTouches[0].clientX}function u(t){return"wheel"===t.type||"mousedown"===t.type||"mousemove"===t.type||"mouseup"===t.type?t.clientY:t.changedTouches[0].clientY}function t(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};this._dropHandler=this._dropHandler.bind(this),this._grabHandler=this._grabHandler.bind(this),this._moveHandler=this._moveHandler.bind(this),this.options=i({smoothExtinction:!1,onGrab:null,onMove:null,onDrop:null},n),this.isTouch=s(),this.events=this.isTouch?{grab:"touchstart",move:"touchmove",drop:"touchend"}:{grab:"mousedown",move:"mousemove",drop:"mouseup"},this.events.options=!!this.isTouch&&{passive:!0},this.window=t,this.content=e,o(this.content.$element,this.events.grab,this._grabHandler,this.events.options)}function r(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this._init=this._init.bind(this),this._prepare=this._prepare.bind(this),this._computeNewScale=this._computeNewScale.bind(this),this._computeNewPosition=this._computeNewPosition.bind(this),this._transform=this._transform.bind(this),this._wheelHandler=function(t){t.preventDefault(),this._transform(this._computeNewPosition(this._computeNewScale(t.deltaY),{x:a(t),y:u(t)}))}.bind(this),this._downHandler=function(t){var e=this;(this.isTouch&&1===t.touches.length||1===t.buttons)&&(this.clickExpired=!1,setTimeout(function(){return e.clickExpired=!0},150))}.bind(this),this._upHandler=function(t){this.clickExpired||(this._transform(this._computeNewPosition(1===this.direction?this.content.maxScale:this.content.minScale,{x:a(t),y:u(t)})),this.direction*=-1)}.bind(this);this.content.$element=document.querySelector(t),this.isTouch=s(),this.events=this.isTouch?{down:"touchstart",up:"touchend"}:{down:"mousedown",up:"mouseup"},this.events.options=!!this.isTouch&&{passive:!0},this.content.$element&&(this.options=i({type:"image",width:null,height:null,dragScrollable:!0,dragScrollableOptions:{},minScale:null,maxScale:1,speed:50,zoomOnClick:!0},e),this.options.minScale&&this.options.minScale>=this.options.maxScale&&(this.options.minScale=null),this.window.$element=this.content.$element.parentNode,"image"===this.options.type?this.content.$element.complete?this._init():this.content.$element.onload=this._init:this._init())}return r.prototype={constructor:r,isTouch:!(t.prototype={constructor:t,window:null,content:null,isTouch:!1,isGrab:!1,events:null,moveTimer:null,options:{},coordinates:null,speed:null,_grabHandler:function(t){(this.isTouch&&1===t.touches.length||1===t.buttons)&&(this.isTouch||t.preventDefault(),this.isGrab=!0,this.coordinates={left:a(t),top:u(t)},this.speed={x:0,y:0},o(document,this.events.drop,this._dropHandler,this.events.options),o(document,this.events.move,this._moveHandler,this.events.options),"function"==typeof this.options.onGrab&&this.options.onGrab())},_dropHandler:function(t){this.isTouch||t.preventDefault(),this.isGrab=!1,e(document,this.events.drop,this._dropHandler),e(document,this.events.move,this._moveHandler),"function"==typeof this.options.onDrop&&this.options.onDrop()},_moveHandler:function(t){this.isTouch||t.preventDefault();var e=this.window,n=this.content,i=this.speed,o=this.coordinates,s=this.options;i.x=a(t)-o.left,i.y=u(t)-o.top,clearTimeout(this.moveTimer),this.moveTimer=setTimeout(function(){i.x=0,i.y=0},50);var r=n.currentLeft+i.x,h=n.currentTop+i.y,c=(n.currentWidth-e.originalWidth)/2+n.correctX,l=(n.currentHeight-e.originalHeight)/2+n.correctY;Math.abs(r)<=c&&(n.currentLeft=r),Math.abs(h)<=l&&(n.currentTop=h),function(t,e){var n=e.left,i=e.top,o=e.scale;t.style.transform="translate3d(".concat(n,"px, ").concat(i,"px, 0px) scale(").concat(o,")")}(n.$element,{left:n.currentLeft,top:n.currentTop,scale:n.currentScale}),o.left=a(t),o.top=u(t),"function"==typeof s.onMove&&s.onMove()},destroy:function(){for(var t in e(this.content.$element,this.events.grab,this._grabHandler,this.events.options),this)this.hasOwnProperty(t)&&(this[t]=null)}}),events:null,content:{},window:{},direction:1,options:null,dragScrollable:null,clickExpired:!0,_init:function(){this._prepare(),!0===this.options.dragScrollable&&(this.dragScrollable=new t(this.window,this.content,this.options.dragScrollableOptions)),o(this.window.$element,"wheel",this._wheelHandler),this.options.zoomOnClick&&(o(this.window.$element,this.events.down,this._downHandler,this.events.options),o(this.window.$element,this.events.up,this._upHandler,this.events.options))},_prepare:function(){var t=n(this.window.$element);this.window.originalWidth=this.window.$element.offsetWidth,this.window.originalHeight=this.window.$element.offsetHeight,this.window.positionLeft=t.left,this.window.positionTop=t.top,"image"===this.options.type?(this.content.originalWidth=this.options.width||this.content.$element.naturalWidth,this.content.originalHeight=this.options.height||this.content.$element.naturalHeight):(this.content.originalWidth=this.options.width||this.content.$element.offsetWidth,this.content.originalHeight=this.options.height||this.content.$element.offsetHeight),this.content.minScale=this.options.minScale||Math.min(this.window.originalWidth/this.content.originalWidth,this.window.originalHeight/this.content.originalHeight),this.content.maxScale=this.options.maxScale,this.content.currentWidth=this.content.originalWidth*this.content.minScale,this.content.currentHeight=this.content.originalHeight*this.content.minScale,this.content.currentLeft=0,this.content.currentTop=0,this.content.currentScale=this.content.minScale,this.content.correctX=Math.max(0,(this.window.originalWidth-this.content.currentWidth)/2),this.content.correctY=Math.max(0,(this.window.originalHeight-this.content.currentHeight)/2),this.content.$element.style.transform="translate3d(0px, 0px, 0px) scale(".concat(this.content.minScale,")"),"function"==typeof this.options.prepare&&this.options.prepare()},_computeNewScale:function(t){this.direction=t<0?1:-1;var e=this.content,n=e.minScale,i=e.maxScale,o=e.currentScale+this.direction/this.options.speed;return o<n?n:i<o?i:o},_computeNewPosition:function(t,e){var n=e.x,i=e.y,o=this.window,s=this.content,r=s.originalWidth*t,h=s.originalHeight*t,c=document,l=c.body,a=c.documentElement,u=o.pageXOffset||a.scrollLeft||l.scrollLeft,p=o.pageYOffset||a.scrollTop||l.scrollTop,d=n+u-o.positionLeft,m=o.originalWidth/2-d+s.currentLeft,f=m*(r/s.currentWidth)-m+s.currentLeft;if(-1===this.direction&&(r-o.originalWidth)/2+s.correctX<Math.abs(f)){var w=f<0?-1:1;f=((r-o.originalWidth)/2+s.correctX)*w}var g=i+p-o.positionTop,v=o.originalHeight/2-g+s.currentTop,_=v*(h/s.currentHeight)-v+s.currentTop;if(-1===this.direction&&(h-o.originalHeight)/2+s.correctY<Math.abs(_)){var b=_<0?-1:1;_=((h-o.originalHeight)/2+s.correctY)*b}t===this.content.minScale&&(f=_=0);var H={currentLeft:s.currentLeft,newLeft:f,currentTop:s.currentTop,newTop:_,currentScale:s.currentScale,newScale:t};return s.currentWidth=r,s.currentHeight=h,s.currentLeft=f,s.currentTop=_,s.currentScale=t,H},_transform:function(t){t.currentLeft;var e=t.newLeft,n=(t.currentTop,t.newTop),i=(t.currentScale,t.newScale);this.content.$element.style.transform="translate3d(".concat(e,"px, ").concat(n,"px, 0px) scale(").concat(i,")"),"function"==typeof this.options.rescale&&this.options.rescale()},_zoom:function(t){var e=n(this.window.$element);this._transform(this._computeNewPosition(this._computeNewScale(t),{x:e.left+this.window.originalWidth/2,y:e.top+this.window.originalHeight/2}))},prepare:function(){this._prepare()},zoomUp:function(){this._zoom(-1)},zoomDown:function(){this._zoom(1)},destroy:function(){for(var t in e(this.window.$element,"wheel",this._wheelHandler),this.options.zoomOnClick&&(e(this.window.$element,this.events.down,this._downHandler,this.events.options),e(this.window.$element,this.events.up,this._upHandler,this.events.options)),this.dragScrollable&&this.dragScrollable.destroy(),this)this.hasOwnProperty(t)&&(this[t]=null)}},r.create=function(t,e){return new r(t,e)},r});